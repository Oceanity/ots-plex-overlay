$(function(){function t(t,r){c.html(n(t)),u.width(`${100*t/r}%`)}function n(t){let n=Math.floor(t/1e3%60),r=Math.floor(t/6e4%60),a=Math.floor(t/36e5%24),e=0!==a&&a<10?"0"+a:a,o=0!==a&&r<10?"0"+r:r,l=n<10?"0"+n:n;return`${e?e+":":""}${o}:${l}`}let r={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(t,n,a)=>{r[n]=a});const a=$("body"),e=$("#art-image"),o=$("#track-title"),l=$("#track-artist"),i=$("#track-album"),c=$("#track-current"),s=$("#track-total"),u=$("#current-progress"),d=250;let f={};currentTime=0,isPlaying=!1;setInterval(function(){isPlaying&&(currentTime+=1e3,t(currentTime,f.duration))},1e3);const g=io("/plex-overlay");g.on("connect",()=>{console.log("[Connected to server]"),g.emit("handshake",{})}),g.on("track-info",t=>{t.playing?(f=t,o.html(t.title||""),l.html(t.artist||""),i.html(t.album||""),s.html(` / ${n(t.duration)}`),t.art&&t.art!==e.attr("src")?(e.attr("src",null),e.ready(function(){a.fadeIn(d)}),e.attr("src",t.art)):(t.art||e.attr("src",null),a.fadeIn(d))):a.fadeOut(d)}),g.on("play-state",t=>{isPlaying=t,isPlaying?a.fadeIn(d):a.fadeOut(d),console.log(`Player is now ${isPlaying?"playing":"stopped"}.`)}),g.on("tick",n=>{console.log("tock"),currentTime=n,t(n,f.duration)})});