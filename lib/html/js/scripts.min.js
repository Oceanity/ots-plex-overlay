$(function(){function t(t,n){c.html(r(t)),u.width(`${100*t/n}%`)}function r(t){let r=Math.floor(t/1e3%60),n=Math.floor(t/6e4%60),e=Math.floor(t/36e5%24),a=0!==e&&e<10?"0"+e:e,o=0!==e&&n<10?"0"+n:n,l=r<10?"0"+r:r;return`${a?a+":":""}${o}:${l}`}let n={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(t,r,e)=>{n[r]=e});const e=$("body"),a=$("#art-image"),o=$("#track-title"),l=$("#track-artist"),i=$("#track-album"),c=$("#track-current"),s=$("#track-total"),u=$("#current-progress"),m=250;let d={};currentTime=0,isPlaying=!1;setInterval(function(){isPlaying&&(currentTime+=1e3,t(currentTime,d.duration))},1e3);const f=io("/plex-overlay");f.on("connect",()=>{console.log("[Connected to server]"),f.emit("handshake",{})}),f.on("track-info",t=>{d=t,o.html(t.title||""),l.html(t.artist||""),i.html(t.album||""),s.html(` / ${r(t.duration)}`),t.art&&t.art!==a.attr("src")?(a.attr("src",null),a.ready(function(){e.fadeIn(m)}),a.attr("src",t.art)):(t.art||a.attr("src",null),e.fadeIn(m))}),f.on("play-state",t=>{isPlaying=t,console.log(`Player is now ${isPlaying?"playing":"stopped"}.`)}),f.on("tick",r=>{console.log("tock"),currentTime=r,t(r,d.duration)})});