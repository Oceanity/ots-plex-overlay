$(function(){function t(t,a){i.html(r(t)),f.width(`${100*t/a}%`)}function r(t){let r=Math.floor(t/1e3%60),a=Math.floor(t/6e4%60),o=Math.floor(t/36e5%24),n=0!==o&&o<10?"0"+o:o,e=0!==o&&a<10?"0"+a:a,l=r<10?"0"+r:r;return`${n?n+":":""}${e}:${l}`}let a={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(t,r,o)=>{a[r]=o});const o=$("body"),n=$("#art-image"),e=$("#track-title"),l=$("#track-artist"),c=$("#track-album"),i=$("#track-current"),u=$("#track-total"),f=$("#current-progress"),s=250;let d={};const h=io("/plex-overlay");h.on("connect",()=>{console.log("[Connected to server]"),h.emit("handshake",{})}),h.on("track-info",a=>{d=a,a.playing?(e.html(a.title||""),l.html(a.artist||""),c.html(a.album||""),u.html(` / ${r(a.duration)}`),t(a.offset,a.duration),a.art&&a.art!==n.attr("src")?(n.attr("src",null),n.ready(function(){o.fadeIn(s)}),n.attr("src",a.art)):(a.art||n.attr("src",null),o.fadeIn(s))):o.fadeOut(s)}),h.on("tick",r=>{t(r,d.duration)})});